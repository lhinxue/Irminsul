import { createContext, useState } from "react";

export const Irminsul = createContext()

export default function LeyLines({ children }) {

    // IRMINSUL
    const [irminsul, setIrminsul] = useState({
        'a4522850-ac16-4ccc-a0bf-bb48a471f622': {
            name: 'Default',
            _: {
                'a9754b2a-3918-4a5asda-bd2d-a79ded6fcf0d': {
                    name: 'Example',
                    _: {
                        '16664bf0-bf02-4c4a-902c-4ab44485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593582242d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab44222485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-59358422222d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4334485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935842333d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab444833335b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593544842d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4445585b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935866642d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab47774485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593588842d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4448587b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935878742d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab44478733885b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593584256565d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                    }
                },
                '6b185e41-d724-4844-asdsd35b-e7e53d82339b': {
                    name: 'Empty',
                    _: {}
                },
                '16664bf0-bf02-4c4a-9asdfd02c-4ab44485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-8asdfsdfsdf94f-593582242d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902aqewec-4ab44222485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '6b185e41-d724-4844-a35b-e7e53d82339b': {
                    name: 'Empty',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593582242d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44222485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-59358422222d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4334485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935842333d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab444833335b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593544842d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4445585b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935866642d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab47774485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593588842d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4448587b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935878742d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44478733885b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593584256565d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
            }
        },
        'a4522850-ac16-4ccc-a0bf-bbee48a471f622': {
            name: 'Default',
            _: {
                'a9754b2a-3918-4a5a-bd2d-a79ded6fcf0d': {
                    name: 'Example',
                    _: {
                        '16664bf0-bf02-4c4a-902c-4ab44485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593582242d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab44222485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-59358422222d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4334485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935842333d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab444833335b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593544842d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4445585b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935866642d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab47774485b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593588842d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab4448587b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-5935878742d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                        '16664bf0-bf02-4c4a-902c-4ab44478733885b601': {
                            name: 'Email Addresses',
                            type: 'tb',
                            _: {}
                        },
                        '48f24b55-5542-4005-894f-593584256565d408c': {
                            name: 'Resume',
                            type: 'md',
                            _: {}
                        },
                    }
                },
                '6b185e41-d724-4844-a35b-e7e53d82339b': {
                    name: 'Empty',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593582242d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44222485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-59358422222d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4334485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935842333d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab444833335b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593544842d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4445585b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935866642d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab47774485b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593588842d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab4448587b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-5935878742d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
                '16664bf0-bf02-4c4a-902c-4ab44478733885b601': {
                    name: 'Email Addresses',
                    type: 'tb',
                    _: {}
                },
                '48f24b55-5542-4005-894f-593584256565d408c': {
                    name: 'Resume',
                    type: 'md',
                    _: {}
                },
            }
        },
        '6b185e41-d724-4844-a35b-e7e53d82339b': {
            name: 'Empty',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab44485b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-593582242d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab44222485b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-59358422222d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab4334485b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-5935842333d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab444833335b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-593544842d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab4445585b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-5935866642d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab47774485b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-593588842d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab4448587b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-5935878742d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },
        '16664bf0-bf02-4c4a-902c-4ab44478733885b601': {
            name: 'Email Addresses',
            type: 'tb',
            _: {}
        },
        '48f24b55-5542-4005-894f-593584256565d408c': {
            name: 'Resume',
            type: 'md',
            _: {}
        },

    })
    const createTrunk = (strTrunkId) => {
        setIrminsul(pre => ({
            ...pre,
            [strTrunkId]: {}
        }))
    }
    const createBranch = (strTrunkId, strBranchId) => {
        setIrminsul(pre => ({
            ...pre,
            [strTrunkId]: {
                ...pre[strBranchId],
                [strBranchId]: {}
            }
        }))
    }
    const createLeaf = (strTrunkId, strBranchId, strLeafId) => {
        updateLeaf(strTrunkId, strBranchId, strLeafId, '')
    }
    const deleteTrunk = (strTrunkId) => {
        setIrminsul(pre => {
            delete pre[strTrunkId]
            return pre
        })
    }
    const deleteBranch = (strTrunkId, strBranchId) => {
        setIrminsul(pre => {
            delete pre[strTrunkId][strBranchId]
            return pre
        })
    }
    const deleteLeaf = (strTrunkId, strBranchId, strLeafId) => {
        setIrminsul(pre => {
            delete pre[strTrunkId][strBranchId][strLeafId]
            return pre
        })
    }
    const updateLeaf = (strTrunkId, strBranchId, strLeafId, strLeafContent) => {
        setIrminsul(pre => ({
            ...pre,
            [strTrunkId]: {
                ...pre[strBranchId],
                [strBranchId]: {
                    ...pre[strBranchId][strLeafId],
                    [strLeafId]: strLeafContent
                }
            }
        }))
    }

    // User Configuration
    const [config, setConfig] = useState({
        title: ''
    })
    const updateConfig = (strKey, objValue) => {
        setConfig(pre => ({
            ...pre,
            [strKey]: objValue
        }))
    }

    // Import & Export
    const import_data = (objData) => {
        setIrminsul(objData.Irminsul)
        setConfig(objData.Config)
    }
    const export_data = () => {
        return {
            Irminsul: irminsul,
            Config: config
        }
    }

    // 
    // User Configuration
    const [api, setApi] = useState({
        root: undefined,
        branch: undefined,
        leaf: undefined
    })
    const updateApi = (strKey, objValue) => {
        console.log(objValue)
        setApi(pre => ({
            ...pre,
            [strKey]: objValue
        }))
    }

    return (
        <Irminsul.Provider value={{
            irminsul: {
                _: irminsul,
                set: setIrminsul,
                create: {
                    trunk: createTrunk,
                    branch: createBranch,
                    leaf: createLeaf
                },
                delete: {
                    trunk: deleteTrunk,
                    branch: deleteBranch,
                    leaf: deleteLeaf
                },
                update: {
                    leaf: updateLeaf
                },
                config: {
                    _: config,
                    set: setConfig,
                    update: updateConfig
                },
                import: import_data,
                export: export_data
            },
            api: {
                _: api,
                update: updateApi,
                root: api.root,
                branch: api.branch,
                leaf: api.leaf,


            }
        }}>
            {children}
        </Irminsul.Provider>
    )
}